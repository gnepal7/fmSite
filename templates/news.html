{% extends 'base.html' %}
{% load static %}
{% load filters %}
{% block content %}

<div class="wrapper dg listing mt80">
	<div class="col_9">
		<h5 class="bl-title">News</h5>
		<div class="listing newslist">
			{% for nl in newsList %}
			<article class="newslist_item df">
				<a class="img-outer db" href="{% url 'newsDetail' nl.id %}">
					{% if nl.image %}
					<img src="{{ nl.image.file.url }}" alt="{{ nl.title }}">
					{% else %}
					<img src="{% static 'images/default.jpg' %}" alt="{{ nl.title }}">
					{% endif %}
				</a>
				<aside class="newslist_text">
					<a class="db title h3" href="{% url 'newsDetail' nl.id %}">{{nl.title}}</a>
					<p>{{ nl.content|clean_content }}</p>
				</aside>
			</article>
			{% endfor %}

			<div class="mt-3 paginate col_12 df gap-1">
				<!-- Previous -->
				{% if page_obj.has_previous %}
				<a class="prev page-numbers" href="?page={{ page_obj.previous_page_number }}">
					<i class="cf cf-chevron-left"></i>
				</a>
				{% endif %}

				<!-- Page Numbers (auto handles 1,2,3...7, last, ...) -->
				{% for num in page_obj.paginator.page_range %}
					{% if page_obj.number == num %}
					<span aria-current="page" class="page-numbers current">{{ num }}</span>
					{% elif num > page_obj.number|add:-3 and num < page_obj.number|add:3 or num==1 or
						num==page_obj.paginator.num_pages %} 
					<a class="page-numbers" href="?page={{ num }}">{{ num }}</a>
					{% elif num == page_obj.number|add:-4 or num == page_obj.number|add:4 %}
					<span class="page-numbers">...</span>
					{% endif %}
				{% endfor %}

				<!-- Next -->
				{% if page_obj.has_next %}
				<a class="next page-numbers" href="?page={{ page_obj.next_page_number }}">
					<i class="cf cf-chevron-right"></i>
				</a>
				{% endif %}
			</div>

		</div>
	</div>
	<div class="col_3">
		<h4>Place for facebook follow page.</h4>
	</div>
</div>
{% endblock %}