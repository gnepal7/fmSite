{% extends 'base.html' %}
{% load static %}
{% load filters %}
{% block content %}

<div class="wrapper dg listing mt80">
	<div class="col_9">
		<h5 class="bl-title">Archiev</h5>

		<div class="listing dg archiev">
			{% for ap in page_obj %}
			<article class="archiev_item col_12 df">
				<aside class="archiev_name dfc">
					<figure class="df archiev_sign df">
						<i class="cf cf-volume-up"></i> |
						<time>{{ ap.broadcast_date|date:"d M Y" }}</time>
					</figure>
					{% if ap.audio_file %}
					<audio controls>
						<source src="{{ ap.audio_file.file.url }}" type="audio/mpeg">
						Your browser does not support audio.
					</audio>
					{% endif %}
					<h6 class="archiev_title">{{ ap.program_name }}</h6>
				</aside>
				{% if ap.featured_image %}
				<img src="{{ ap.featured_image.file.url }}" alt="{{ ap.program_name }}" width="200">
				{% endif %}
			</article>
			{% endfor %}

			<div class="mt-3 paginate col_12 df gap-1">
				{% if page_obj.has_previous %}
				<a class="prev page-numbers" href="?page={{ page_obj.previous_page_number }}"><i
						class="cf cf-chevron-left"></i></a>
				{% endif %}

				{% for num in page_obj.paginator.page_range %}
					{% if page_obj.number == num %}
						<span class="page-numbers current">{{ num }}</span>
					{% elif num > page_obj.number|add:-3 and num < page_obj.number|add:3 or num == 1 or num == page_obj.paginator.num_pages %}
						<a class="page-numbers" href="?page={{ num }}">{{ num }}</a>
					{% elif num == page_obj.number|add:-4 or num == page_obj.number|add:4 %}
						<span class="page-numbers">...</span>
					{% endif %}
				{% endfor %}

					{% if page_obj.has_next %}
					<a class="next page-numbers" href="?page={{ page_obj.next_page_number }}"><i
							class="cf cf-chevron-right"></i></a>
					{% endif %}
			</div>

		</div>

	</div>
	<div class="col_3">
		<h4>Place for facebook follow page.</h4>
	</div>
</div>

{% endblock %}